<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>
	<package name="default" extends="struts-default">
		<!-- Action par défaut -->
		<default-action-ref name="index" />
		<!-- Results globaux -->
		<global-results>
			<result name="error">/jsp/error.jsp</result>
		</global-results>
		<!-- Action "index" -->
		<action name="index">
			<result>/jsp/index.jsp</result>
		</action>
		<!-- Action listant les sites d'escalade -->
		<action name="site_list"
			class="com.openclassrooms.escalade.action.GestionSiteAction"
			method="doList">
			<result>/jsp/site/list.jsp</result>
		</action>
		<!-- Action affichant le détail d'un site -->
		<action name="site_detail"
			class="com.openclassrooms.escalade.action.GestionSiteAction"
			method="doDetail">

			<interceptor-ref name="store">
				<param name="operationMode">RETRIEVE</param>
			</interceptor-ref>
			<interceptor-ref name="defaultStack" />


			<result name="success">/jsp/site/detail.jsp</result>
		</action>
		<!-- Actions permettant de créer un site d'escalade -->
		<action name="site_new"
			class="com.openclassrooms.escalade.action.GestionSiteAction"
			method="doCreate">

			<interceptor-ref name="store">
				<param name="operationMode">STORE</param>
			</interceptor-ref>
			<interceptor-ref name="defaultStack" />
			<result name="input">/jsp/site/new.jsp</result>
			<result name="success" type="redirectAction">
				<param name="actionName">site_detail</param>
				<param name="id">${id}</param>
			</result>
		</action>

		<!-- Action supprimant un site -->
		<action name="site_delete"
			class="com.openclassrooms.escalade.action.GestionSiteAction"
			method="doDelete">
			<result name="success">/jsp/site/list.jsp</result>
		</action>
		<!-- Action listant les topos d'escalade -->
		<action name="topo_list"
			class="com.openclassrooms.escalade.action.GestionTopoAction"
			method="doList">
			<result>/jsp/topo/list.jsp</result>
		</action>
		<!-- Action affichant le détail d'un topo d'escalade -->
		<action name="topo_detail"
			class="com.openclassrooms.escalade.action.GestionTopoAction"
			method="doDetail">
			<result name="success">/jsp/topo/detail.jsp</result>
		</action>
		<!-- Action supprimant un topo -->
		<action name="topo_delete"
			class="com.openclassrooms.escalade.action.GestionTopoAction"
			method="doDelete">
			<result name="success">/jsp/topo/list.jsp</result>
		</action>

	</package>
</struts>